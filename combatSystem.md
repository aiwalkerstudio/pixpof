# 简化版流放之路战斗系统设计

## 1. 系统概述

### 1.1 设计目标
- 简化战斗机制
- 保持打击感
- 确保策略性
- 降低上手难度

### 1.2 核心特点
- 实时战斗
- 技能组合
- 清晰反馈
- 资源管理

## 2. 基础机制

### 2.1 攻击系统
- 基础攻击
  * 无冷却时间
  * 低资源消耗
  * 基础伤害值
  * 可触发装备词缀

- 技能攻击
  * 有冷却时间
  * 高资源消耗
  * 高伤害/效果
  * 可触发特殊效果

### 2.2 伤害计算
- 基础公式
  * 最终伤害 = 基础伤害 * (1 + 增伤) * (1 - 减伤)
  * 暴击伤害 = 最终伤害 * 暴击倍率
  * 实际伤害 = 最终伤害 - 护甲值

- 伤害类型
  * 物理伤害
  * 魔法伤害
  * 真实伤害（无视防御）

### 2.3 命中机制
- 命中判定
  * 基础命中率90%
  * 可被闪避降低
  * 精准属性提升
  * 暴击单独判定

- 闪避机制
  * 基础闪避率5%
  * 最大闪避率75%
  * 被闪避无伤害

## 3. 资源系统

### 3.1 生命值
- 基础属性决定
- 装备加成
- 自动回复
- 药剂恢复

### 3.2 魔法值
- 基础属性决定
- 技能消耗
- 自动回复
- 药剂恢复

## 4. 战斗状态

### 4.1 基础状态
- 普通状态
- 眩晕状态
- 冰冻状态
- 燃烧状态
- 中毒状态

### 4.2 特殊状态
- 无敌状态
- 隐身状态
- 狂暴状态
- 虚弱状态

## 5. 战斗流程

### 5.1 战斗节奏
- 探索阶段
  * 寻找敌人
  * 规划路线
  * 准备战斗

- 战斗阶段
  * 技能输出
  * 资源管理
  * 走位规避

- 收尾阶段
  * 拾取战利品
  * 恢复状态
  * 继续探索

### 5.2 BOSS战
- 特殊机制
  * 阶段转换
  * 特殊技能
  * 小怪召唤
  * 场地效果

- 战斗节奏
  * 观察阶段
  * 输出阶段
  * 规避阶段

## 6. 技术实现

### 6.1 战斗接口
```csharp
public interface ICombatSystem
{
    void ProcessAttack(Character attacker, Character target);
    float CalculateDamage(float baseDamage, Character attacker, Character target);
    bool CheckHit(Character attacker, Character target);
    void ApplyDamage(Character target, float damage, DamageType type);
}
```

### 6.2 状态接口
```csharp
public interface ICombatState
{
    void OnEnter(Character character);
    void OnExit(Character character);
    void Update(float deltaTime);
    bool CanAttack();
    bool CanMove();
}
```

## 7. 视觉反馈

### 7.1 打击特效
- 命中特效
- 暴击特效
- 闪避特效
- 状态特效

### 7.2 伤害显示
- 伤害数字
- 暴击高亮
- 状态图标
- 资源变化

## 8. 音效设计

### 8.1 战斗音效
- 攻击音效
- 受击音效
- 技能音效
- 状态音效

### 8.2 环境音效
- 战斗背景
- 场景音效
- BOSS音乐
- 胜利音效

## 9. 平衡性设计

### 9.1 数值平衡
- 基础伤害
  * 普通攻击：100%
  * 技能攻击：150%-300%
  * BOSS技能：200%-500%

- 资源消耗
  * 普通攻击：5%资源
  * 技能攻击：10%-30%资源
  * 终极技能：50%资源

### 9.2 冷却设计
- 普通技能：3-8秒
- 强力技能：10-20秒
- 终极技能：30-60秒
- 药剂冷却：15秒

## 10. 注意事项
- 保持打击感
- 确保操作流畅
- 反馈要清晰
- 避免过度复杂
- 预留扩展空间
